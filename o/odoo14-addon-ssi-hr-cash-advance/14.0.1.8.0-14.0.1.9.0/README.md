# Comparing `tmp/odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0-py3-none-any.whl.zip` & `tmp/odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,36 +1,36 @@
-Zip file size: 81741 bytes, number of entries: 34
--rw-r--r--  2.0 unx     1229 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/README.rst
--rw-r--r--  2.0 unx      181 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/__init__.py
--rw-r--r--  2.0 unx     1602 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/__manifest__.py
--rw-r--r--  2.0 unx      611 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/data/account_journal_data.xml
--rw-r--r--  2.0 unx     1839 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/data/approval_template_data.xml
--rw-r--r--  2.0 unx      827 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/data/base_automation_data.xml
--rw-r--r--  2.0 unx      726 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/data/ir_actions_server_data.xml
--rw-r--r--  2.0 unx     1157 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/data/ir_sequence_data.xml
--rw-r--r--  2.0 unx    14047 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/data/policy_template_data.xml
--rw-r--r--  2.0 unx     2108 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/data/sequence_template_data.xml
--rw-r--r--  2.0 unx      871 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/demo/account_account_demo.xml
--rw-r--r--  2.0 unx      615 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/demo/account_journal_demo.xml
--rw-r--r--  2.0 unx     1303 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/demo/hr_expense_type_demo.xml
--rw-r--r--  2.0 unx      331 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/models/__init__.py
--rw-r--r--  2.0 unx    16663 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance.py
--rw-r--r--  2.0 unx      977 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_line.py
--rw-r--r--  2.0 unx    13989 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_settlement.py
--rw-r--r--  2.0 unx     2645 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_settlement_line.py
--rw-r--r--  2.0 unx      850 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/models/hr_expense_type.py
--rw-r--r--  2.0 unx     1662 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/models/res_config_settings.py
--rw-r--r--  2.0 unx     1622 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/security/ir.model.access.csv
--rw-r--r--  2.0 unx     1234 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/security/ir_module_category_data.xml
--rw-r--r--  2.0 unx     7413 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/security/ir_rule_data.xml
--rw-r--r--  2.0 unx     5919 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/security/res_group_data.xml
--rw-r--r--  2.0 unx    48333 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/static/description/icon.png
--rw-r--r--  2.0 unx     4151 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/static/description/icon_timesheet.png
--rw-r--r--  2.0 unx     9898 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/views/hr_cash_advance_views.xml
--rw-r--r--  2.0 unx     9772 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/views/hr_cash_advance_views_settlement.xml
--rw-r--r--  2.0 unx     1171 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/views/hr_expense_type_views.xml
--rw-r--r--  2.0 unx    15638 b- defN 24-Mar-30 08:17 odoo/addons/ssi_hr_cash_advance/views/res_config_settings_views.xml
--rw-r--r--  2.0 unx     2254 b- defN 24-Mar-30 08:17 odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Mar-30 08:17 odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 24-Mar-30 08:17 odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     3934 b- defN 24-Mar-30 08:17 odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/RECORD
-34 files, 175669 bytes uncompressed, 75017 bytes compressed:  57.3%
+Zip file size: 82841 bytes, number of entries: 34
+-rw-r--r--  2.0 unx     1229 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/README.rst
+-rw-r--r--  2.0 unx      181 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/__init__.py
+-rw-r--r--  2.0 unx     1683 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/__manifest__.py
+-rw-r--r--  2.0 unx      611 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/data/account_journal_data.xml
+-rw-r--r--  2.0 unx     1839 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/data/approval_template_data.xml
+-rw-r--r--  2.0 unx      827 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/data/base_automation_data.xml
+-rw-r--r--  2.0 unx      726 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/data/ir_actions_server_data.xml
+-rw-r--r--  2.0 unx     1157 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/data/ir_sequence_data.xml
+-rw-r--r--  2.0 unx    14047 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/data/policy_template_data.xml
+-rw-r--r--  2.0 unx     2108 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/data/sequence_template_data.xml
+-rw-r--r--  2.0 unx      871 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/demo/account_account_demo.xml
+-rw-r--r--  2.0 unx      615 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/demo/account_journal_demo.xml
+-rw-r--r--  2.0 unx     1303 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/demo/hr_expense_type_demo.xml
+-rw-r--r--  2.0 unx      331 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/models/__init__.py
+-rw-r--r--  2.0 unx    17960 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance.py
+-rw-r--r--  2.0 unx     1087 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_line.py
+-rw-r--r--  2.0 unx    15293 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_settlement.py
+-rw-r--r--  2.0 unx     2766 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_settlement_line.py
+-rw-r--r--  2.0 unx      850 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/models/hr_expense_type.py
+-rw-r--r--  2.0 unx     1662 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/models/res_config_settings.py
+-rw-r--r--  2.0 unx     1622 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     1234 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/security/ir_module_category_data.xml
+-rw-r--r--  2.0 unx     7413 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/security/ir_rule_data.xml
+-rw-r--r--  2.0 unx     5919 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/security/res_group_data.xml
+-rw-r--r--  2.0 unx    48333 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/static/description/icon.png
+-rw-r--r--  2.0 unx     4151 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/static/description/icon_timesheet.png
+-rw-r--r--  2.0 unx    12972 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/views/hr_cash_advance_views.xml
+-rw-r--r--  2.0 unx    12887 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/views/hr_cash_advance_views_settlement.xml
+-rw-r--r--  2.0 unx     1171 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/views/hr_expense_type_views.xml
+-rw-r--r--  2.0 unx    15638 b- defN 24-Mar-30 17:20 odoo/addons/ssi_hr_cash_advance/views/res_config_settings_views.xml
+-rw-r--r--  2.0 unx     2369 b- defN 24-Mar-30 17:21 odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Mar-30 17:21 odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 24-Mar-30 17:21 odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3937 b- defN 24-Mar-30 17:21 odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/RECORD
+34 files, 184889 bytes uncompressed, 76117 bytes compressed:  58.8%
```

## zipnote {}

```diff
@@ -84,20 +84,20 @@
 
 Filename: odoo/addons/ssi_hr_cash_advance/views/hr_expense_type_views.xml
 Comment: 
 
 Filename: odoo/addons/ssi_hr_cash_advance/views/res_config_settings_views.xml
 Comment: 
 
-Filename: odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/METADATA
+Filename: odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/WHEEL
+Filename: odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/top_level.txt
+Filename: odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/RECORD
+Filename: odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/ssi_hr_cash_advance/__manifest__.py

```diff
@@ -1,28 +1,30 @@
 # Copyright 2022 OpenSynergy Indonesia
 # Copyright 2022 PT. Simetri Sinergi Indonesia
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 {
     "name": "Employee Cash Advance",
-    "version": "14.0.1.8.0",
+    "version": "14.0.1.9.0",
     "website": "https://simetri-sinergi.id",
     "author": "OpenSynergy Indonesia, PT. Simetri Sinergi Indonesia",
     "license": "AGPL-3",
     "installable": True,
     "depends": [
         "ssi_hr_expense",
         "ssi_master_data_mixin",
         "ssi_transaction_confirm_mixin",
         "ssi_transaction_open_mixin",
         "ssi_transaction_done_mixin",
         "ssi_transaction_cancel_mixin",
+        "ssi_transaction_pricelist_mixin",
         "ssi_employee_document_mixin",
         "ssi_product_line_account_mixin",
         "ssi_company_currency_mixin",
+        "ssi_m2o_configurator_mixin",
         "base_duration",
         "base_automation",
     ],
     "data": [
         "security/ir_module_category_data.xml",
         "security/res_group_data.xml",
         "security/ir.model.access.csv",
```

## odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance.py

```diff
@@ -12,14 +12,16 @@
 class HrCashAdvance(models.Model):
     _name = "hr.cash_advance"
     _inherit = [
         "mixin.transaction_cancel",
         "mixin.transaction_done",
         "mixin.transaction_open",
         "mixin.transaction_confirm",
+        "mixin.transaction_pricelist",
+        "mixin.many2one_configurator",
         "mixin.employee_document",
         "mixin.company_currency",
     ]
     _description = "Employee Cash Advance"
 
     # Multiple Approval Attribute
     _approval_from_state = "draft"
@@ -105,14 +107,17 @@
         ondelete="restrict",
         states={
             "draft": [
                 ("readonly", False),
             ],
         },
     )
+    pricelist_id = fields.Many2one(
+        required=False,
+    )
     allowed_product_ids = fields.Many2many(
         string="Allowed Product",
         comodel_name="product.product",
         related="type_id.allowed_product_ids",
         store=False,
     )
     allowed_product_category_ids = fields.Many2many(
@@ -123,14 +128,20 @@
     )
     allowed_product_usage_ids = fields.Many2many(
         string="Allowed Product Usage",
         comodel_name="product.usage_type",
         related="type_id.allowed_product_usage_ids",
         store=False,
     )
+    allowed_pricelist_ids = fields.Many2many(
+        string="Allowed Pricelists",
+        comodel_name="product.pricelist",
+        compute="_compute_allowed_pricelist_ids",
+        store=False,
+    )
 
     @api.model
     def _default_currency_id(self):
         return self.env.user.company_id.currency_id
 
     currency_id = fields.Many2one(
         string="Currency",
@@ -337,14 +348,30 @@
     allowed_analytic_account_ids = fields.Many2many(
         string="Allowed Analytic Accounts",
         comodel_name="account.analytic.account",
         compute="_compute_allowed_analytic_account_ids",
         store=False,
     )
 
+    @api.depends("type_id", "currency_id", "employee_id")
+    def _compute_allowed_pricelist_ids(self):
+        for record in self:
+            result = False
+            if record.type_id and record.currency_id and record.employee_id:
+                result = record._m2o_configurator_get_filter(
+                    object_name="product.pricelist",
+                    method_selection=record.type_id.pricelist_selection_method,
+                    manual_recordset=record.type_id.pricelist_ids,
+                    domain=record.type_id.pricelist_domain,
+                    python_code=record.type_id.pricelist_python_code,
+                )
+            record.allowed_pricelist_ids = result.filtered(
+                lambda r: r.currency_id.id == record.currency_id.id
+            )
+
     @api.model
     def _get_policy_field(self):
         res = super(HrCashAdvance, self)._get_policy_field()
         policy_field = [
             "confirm_ok",
             "approve_ok",
             "open_ok",
@@ -548,12 +575,20 @@
     @api.onchange(
         "type_id",
     )
     def onchange_line_analytic_account_id(self):
         if self.type_id:
             self.line_ids.analytic_account_id = False
 
+    @api.onchange(
+        "employee_id",
+        "type_id",
+        "currency_id",
+    )
+    def onchange_pricelist_id(self):
+        self.pricelist_id = False
+
     @ssi_decorator.insert_on_form_view()
     def _insert_form_element(self, view_arch):
         if self._automatically_insert_view_element:
             view_arch = self._reconfigure_statusbar_visible(view_arch)
         return view_arch
```

## odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_line.py

```diff
@@ -13,14 +13,18 @@
 
     cash_advance_id = fields.Many2one(
         string="# Employee Cash Advance",
         comodel_name="hr.cash_advance",
         required=True,
         ondelete="cascade",
     )
+    pricelist_id = fields.Many2one(
+        related="cash_advance_id.pricelist_id",
+        store=True,
+    )
     type_id = fields.Many2one(string="Type", related="cash_advance_id.type_id")
     product_id = fields.Many2one(
         required=True,
     )
     date_expense = fields.Date(
         string="Date Expense",
     )
```

## odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_settlement.py

```diff
@@ -11,14 +11,16 @@
 
 class HrCashAdvanceSettlement(models.Model):
     _name = "hr.cash_advance_settlement"
     _inherit = [
         "mixin.transaction_cancel",
         "mixin.transaction_done",
         "mixin.transaction_confirm",
+        "mixin.transaction_pricelist",
+        "mixin.many2one_configurator",
         "mixin.employee_document",
         "mixin.company_currency",
     ]
     _description = "Employee Cash Advance Settlement"
 
     # Multiple Approval Attribute
     _approval_from_state = "draft"
@@ -81,14 +83,17 @@
         ondelete="restrict",
         states={
             "draft": [
                 ("readonly", False),
             ],
         },
     )
+    pricelist_id = fields.Many2one(
+        required=False,
+    )
     allowed_product_ids = fields.Many2many(
         string="Allowed Product",
         comodel_name="product.product",
         related="type_id.allowed_product_ids",
         store=False,
     )
     allowed_product_category_ids = fields.Many2many(
@@ -99,14 +104,20 @@
     )
     allowed_product_usage_ids = fields.Many2many(
         string="Allowed Product Usage",
         comodel_name="product.usage_type",
         related="type_id.allowed_product_usage_ids",
         store=False,
     )
+    allowed_pricelist_ids = fields.Many2many(
+        string="Allowed Pricelists",
+        comodel_name="product.pricelist",
+        compute="_compute_allowed_pricelist_ids",
+        store=False,
+    )
 
     @api.model
     def _default_currency_id(self):
         return self.env.user.company_id.currency_id
 
     currency_id = fields.Many2one(
         string="Currency",
@@ -237,14 +248,30 @@
     allowed_analytic_account_ids = fields.Many2many(
         string="Allowed Analytic Accounts",
         comodel_name="account.analytic.account",
         compute="_compute_allowed_analytic_account_ids",
         store=False,
     )
 
+    @api.depends("type_id", "currency_id", "employee_id")
+    def _compute_allowed_pricelist_ids(self):
+        for record in self:
+            result = False
+            if record.type_id and record.currency_id and record.employee_id:
+                result = record._m2o_configurator_get_filter(
+                    object_name="product.pricelist",
+                    method_selection=record.type_id.pricelist_selection_method,
+                    manual_recordset=record.type_id.pricelist_ids,
+                    domain=record.type_id.pricelist_domain,
+                    python_code=record.type_id.pricelist_python_code,
+                )
+            record.allowed_pricelist_ids = result.filtered(
+                lambda r: r.currency_id.id == record.currency_id.id
+            )
+
     @api.model
     def _get_policy_field(self):
         res = super(HrCashAdvanceSettlement, self)._get_policy_field()
         policy_field = [
             "confirm_ok",
             "approve_ok",
             "done_ok",
@@ -402,22 +429,30 @@
     @api.onchange(
         "type_id",
     )
     def onchange_line_analytic_account_id(self):
         if self.type_id:
             self.line_ids.analytic_account_id = False
 
+    @api.onchange(
+        "employee_id",
+        "type_id",
+        "currency_id",
+    )
+    def onchange_pricelist_id(self):
+        self.pricelist_id = False
+
     @ssi_decorator.insert_on_form_view()
     def _insert_form_element(self, view_arch):
         if self._automatically_insert_view_element:
             view_arch = self._reconfigure_statusbar_visible(view_arch)
         return view_arch
 
     def action_reload_cash_advance(self):
-        for rec in self.filtered(lambda s: s.state == "draft"):
+        for rec in self.sudo().filtered(lambda s: s.state == "draft"):
             rec.line_ids = False
             line_vals = []
             for line_id in rec.cash_advance_id.line_ids:
                 line_vals.append(
                     (
                         0,
                         0,
```

## odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_settlement_line.py

```diff
@@ -13,14 +13,18 @@
 
     cash_advance_settlement_id = fields.Many2one(
         string="# Employee Cash Advance Settlement",
         comodel_name="hr.cash_advance_settlement",
         required=True,
         ondelete="cascade",
     )
+    pricelist_id = fields.Many2one(
+        related="cash_advance_settlement_id.pricelist_id",
+        store=True,
+    )
     type_id = fields.Many2one(
         string="Type", related="cash_advance_settlement_id.type_id"
     )
     product_id = fields.Many2one(
         required=True,
     )
     date_expense = fields.Date(
```

## odoo/addons/ssi_hr_cash_advance/views/hr_cash_advance_views.xml

### odoo/addons/ssi_hr_cash_advance/views/hr_cash_advance_views.xml

```diff
@@ -77,34 +77,68 @@
           <field name="company_currency_id" invisible="1"/>
           <field name="currency_id"/>
           <field name="type_id"/>
           <field name="allowed_product_ids" widget="many2many_tags" invisible="1"/>
           <field name="allowed_product_category_ids" widget="many2many_tags" invisible="1"/>
           <field name="allowed_product_usage_ids" widget="many2many_tags" invisible="1"/>
           <field name="allowed_analytic_account_ids" widget="many2many_tags" invisible="1"/>
+          <field name="allowed_pricelist_ids" widget="many2many_tags" invisible="1"/>
+          <field name="pricelist_id" domain="[('id', 'in', allowed_pricelist_ids)]"/>
           <field name="date"/>
           <field name="duration_id"/>
           <field name="date_due"/>
         </xpath>
         <xpath expr="//page[1]" position="before">
           <page name="detail" string="Details">
-            <field name="line_ids" context="{'default_currency_id': currency_id}">
-              <tree editable="top">
+            <field name="line_ids" context="{'default_currency_id': currency_id, 'default_pricelist_id': pricelist_id}">
+              <tree>
                 <field name="currency_id" invisible="1"/>
                 <field name="date_expense"/>
-                <field name="product_id" domain="['|',('id','in',parent.allowed_product_ids),('categ_id','in',parent.allowed_product_category_ids)]"/>
-                <field name="usage_id" domain="[('id','in',parent.allowed_product_usage_ids)]"/>
-                <field name="account_id"/>
+                <field name="product_id"/>
+                <field name="usage_id" optional="hide"/>
+                <field name="type_id" invisible="1"/>
+                <field name="account_id" optional="hide"/>
                 <field name="name"/>
-                <field name="analytic_account_id" domain="[('id', 'in', parent.allowed_analytic_account_ids)]"/>
+                <field name="analytic_account_id" domain="[('id', 'in', parent.allowed_analytic_account_ids)]" optional="show"/>
                 <field name="price_unit"/>
                 <field name="uom_quantity"/>
                 <field name="uom_id"/>
                 <field name="price_subtotal"/>
               </tree>
+              <form>
+                <field name="currency_id" invisible="1"/>
+                <field name="type_id" invisible="1"/>
+                <field name="allowed_uom_ids" widget="many2many_tags" invisible="1"/>
+                <group name="detail_1" colspan="4" col="2">
+                  <group name="detail_1_1" colspan="1" col="2">
+                    <field name="date_expense"/>
+                    <field name="product_id" domain="['|',('id','in',parent.allowed_product_ids),('categ_id','in',parent.allowed_product_category_ids)]"/>
+                    <field name="name"/>
+                    <field name="usage_id" domain="[('id','in',parent.allowed_product_usage_ids)]"/>
+                    <field name="account_id"/>
+                    <field name="analytic_account_id" domain="[('id', 'in', parent.allowed_analytic_account_ids)]"/>
+                  </group>
+                  <group name="detail_1_1" colspan="1" col="2">
+                    <field name="pricelist_id"/>
+                    <label for="uom_quantity"/>
+                    <div>
+                      <field name="uom_quantity"/>
+                      <field name="uom_id" domain="[('id','in',allowed_uom_ids)]" attrs="{'required':[('product_id','!=',False)]}" class="oe_inline"/>
+                    </div>
+                    <field name="quantity" invisible="1"/>
+                    <field name="price_unit"/>
+                    <field name="price_subtotal"/>
+                  </group>
+                </group>
+                <notebook>
+                  <page name="note" string="Notes">
+                    <field name="note"/>
+                  </page>
+                </notebook>
+              </form>
             </field>
             <group class="oe_subtotal_footer oe_right">
               <field name="amount_total" string="Total"/>
               <field name="amount_unrealized" string="Unrealized"/>
               <field name="amount_unsettled" string="Unsettled"/>
             </group>
           </page>
```

## odoo/addons/ssi_hr_cash_advance/views/hr_cash_advance_views_settlement.xml

### odoo/addons/ssi_hr_cash_advance/views/hr_cash_advance_views_settlement.xml

```diff
@@ -75,33 +75,67 @@
           <field name="type_id"/>
           <field name="allowed_product_ids" widget="many2many_tags" invisible="1"/>
           <field name="allowed_product_category_ids" widget="many2many_tags" invisible="1"/>
           <field name="allowed_product_usage_ids" widget="many2many_tags" invisible="1"/>
           <field name="allowed_analytic_account_ids" widget="many2many_tags" invisible="1"/>
           <field name="allowed_cash_advance_ids" widget="many2many_tags" invisible="1"/>
           <field name="cash_advance_id" domain="[('id','in',allowed_cash_advance_ids)]"/>
+          <field name="allowed_pricelist_ids" widget="many2many_tags" invisible="1"/>
+          <field name="pricelist_id" domain="[('id', 'in', allowed_pricelist_ids)]"/>
           <field name="date"/>
         </xpath>
         <xpath expr="//page[1]" position="before">
           <page name="detail" string="Details">
-            <button name="action_reload_cash_advance" type="object" string="Reload from Cash Advance" icon="fa-refresh text-primary" states="draft"/>
-            <field name="line_ids" context="{'default_currency_id': company_currency_id}">
-              <tree editable="top">
+            <button name="action_reload_cash_advance" type="object" string="Reload from Cash Advance" icon="fa-refresh text-primary" class="oe_highlight" states="draft"/>
+            <field name="line_ids" context="{'default_currency_id': currency_id, 'default_pricelist_id': pricelist_id}">
+              <tree>
                 <field name="currency_id" invisible="1"/>
                 <field name="date_expense"/>
-                <field name="product_id" domain="['|',('id','in',parent.allowed_product_ids),('categ_id','in',parent.allowed_product_category_ids)]"/>
-                <field name="usage_id" domain="[('id','in',parent.allowed_product_usage_ids)]"/>
-                <field name="account_id"/>
+                <field name="product_id"/>
+                <field name="usage_id" optional="hide"/>
+                <field name="type_id" invisible="1"/>
+                <field name="account_id" optional="hide"/>
                 <field name="name"/>
-                <field name="analytic_account_id" domain="[('id', 'in', parent.allowed_analytic_account_ids)]"/>
+                <field name="analytic_account_id" domain="[('id', 'in', parent.allowed_analytic_account_ids)]" optional="show"/>
                 <field name="price_unit"/>
                 <field name="uom_quantity"/>
                 <field name="uom_id"/>
                 <field name="price_subtotal"/>
               </tree>
+              <form>
+                <field name="currency_id" invisible="1"/>
+                <field name="type_id" invisible="1"/>
+                <field name="allowed_uom_ids" widget="many2many_tags" invisible="1"/>
+                <group name="detail_1" colspan="4" col="2">
+                  <group name="detail_1_1" colspan="1" col="2">
+                    <field name="date_expense"/>
+                    <field name="product_id" domain="['|',('id','in',parent.allowed_product_ids),('categ_id','in',parent.allowed_product_category_ids)]"/>
+                    <field name="name"/>
+                    <field name="usage_id" domain="[('id','in',parent.allowed_product_usage_ids)]"/>
+                    <field name="account_id"/>
+                    <field name="analytic_account_id" domain="[('id', 'in', parent.allowed_analytic_account_ids)]"/>
+                  </group>
+                  <group name="detail_1_1" colspan="1" col="2">
+                    <field name="pricelist_id"/>
+                    <label for="uom_quantity"/>
+                    <div>
+                      <field name="uom_quantity"/>
+                      <field name="uom_id" domain="[('id','in',allowed_uom_ids)]" attrs="{'required':[('product_id','!=',False)]}" class="oe_inline"/>
+                    </div>
+                    <field name="quantity" invisible="1"/>
+                    <field name="price_unit"/>
+                    <field name="price_subtotal"/>
+                  </group>
+                </group>
+                <notebook>
+                  <page name="note" string="Notes">
+                    <field name="note"/>
+                  </page>
+                </notebook>
+              </form>
             </field>
             <group class="oe_subtotal_footer oe_right">
               <field name="amount_total" string="Total"/>
             </group>
           </page>
           <page name="accounting" string="Accounting">
             <group name="accounting_1" colspan="4" col="2">
```

## Comparing `odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/METADATA` & `odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/METADATA`

 * *Files 8% similar despite different names*

```diff
@@ -1,30 +1,32 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-ssi-hr-cash-advance
-Version: 14.0.1.8.0
+Version: 14.0.1.9.0
 Summary: Employee Cash Advance
 Home-page: https://simetri-sinergi.id
 Author: OpenSynergy Indonesia, PT. Simetri Sinergi Indonesia
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
 Classifier: Framework :: Odoo :: 14.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
 Requires-Python: >=3.6
 Requires-Dist: odoo14-addon-base-duration
 Requires-Dist: odoo14-addon-ssi-company-currency-mixin
 Requires-Dist: odoo14-addon-ssi-employee-document-mixin
 Requires-Dist: odoo14-addon-ssi-hr-expense
+Requires-Dist: odoo14-addon-ssi-m2o-configurator-mixin
 Requires-Dist: odoo14-addon-ssi-master-data-mixin
 Requires-Dist: odoo14-addon-ssi-product-line-account-mixin
 Requires-Dist: odoo14-addon-ssi-transaction-cancel-mixin
 Requires-Dist: odoo14-addon-ssi-transaction-confirm-mixin
 Requires-Dist: odoo14-addon-ssi-transaction-done-mixin
 Requires-Dist: odoo14-addon-ssi-transaction-open-mixin
+Requires-Dist: odoo14-addon-ssi-transaction-pricelist-mixin
 Requires-Dist: odoo <14.1dev,>=14.0a
 
 .. image:: https://img.shields.io/badge/licence-AGPL--3-blue.svg
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
 
 =====================
```

## Comparing `odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/RECORD` & `odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -1,34 +1,34 @@
 odoo/addons/ssi_hr_cash_advance/README.rst,sha256=zu3bgSSIW5RUFpC2jvN1FfY-Rjw0sRhHlHTt7_xsEyI,1229
 odoo/addons/ssi_hr_cash_advance/__init__.py,sha256=VAkFvJXefoz7CVUwbL97HBfpLAYmvQPYXfYs71LOpzU,181
-odoo/addons/ssi_hr_cash_advance/__manifest__.py,sha256=nSt9z8hFMvmsBfG7R5EhOiB1Hzx1ROO6aKeMDhV83Hs,1602
+odoo/addons/ssi_hr_cash_advance/__manifest__.py,sha256=_NdTv1l7WCLRuIF_p7ezYGSHHpPur5QvZ952zisEtvE,1683
 odoo/addons/ssi_hr_cash_advance/data/account_journal_data.xml,sha256=Qk0kDQd1tdPWpmb51gynfC6frjduQ_0EEGJMTmn0iRA,611
 odoo/addons/ssi_hr_cash_advance/data/approval_template_data.xml,sha256=8Nuv-J9S_2O1iT116gVkwvNxqRyCb3yn4NAkzR1FLtk,1839
 odoo/addons/ssi_hr_cash_advance/data/base_automation_data.xml,sha256=AEVPOsuXP1J27OxA5b9vG46r6Zw43uY8Lk6gI26M8D4,827
 odoo/addons/ssi_hr_cash_advance/data/ir_actions_server_data.xml,sha256=vEG4O7rB6J4VeyJXsY48FmPnElM65c9Y9OOcGlxAG7s,726
 odoo/addons/ssi_hr_cash_advance/data/ir_sequence_data.xml,sha256=Mt2mk6Tq0p6v292q36b0CGxMhgsASxiUJLzvs9FJIs8,1157
 odoo/addons/ssi_hr_cash_advance/data/policy_template_data.xml,sha256=gMT-utdFp1rdxK6Us7hEF3xKFwCqMNbOWZiHZNkvc7A,14047
 odoo/addons/ssi_hr_cash_advance/data/sequence_template_data.xml,sha256=D3EHrvcu5wx3LxkxC7KH7hKBUihhxEAFz2s3j5sNHuw,2108
 odoo/addons/ssi_hr_cash_advance/demo/account_account_demo.xml,sha256=F2uPLgQVY0vSe63NkXn3MgCDtJ_sPf2bwVXRBUpl8rI,871
 odoo/addons/ssi_hr_cash_advance/demo/account_journal_demo.xml,sha256=32Vvi-5x6vC48jVE1a3EG0CHenl-TqOv55RPMOLaxdc,615
 odoo/addons/ssi_hr_cash_advance/demo/hr_expense_type_demo.xml,sha256=PAV3v-xY01JdCfEqBSZK__QGvhpId_Af8_PlJdRcCbM,1303
 odoo/addons/ssi_hr_cash_advance/models/__init__.py,sha256=LYnYB0Of-epHAU17T-3HxOWlA8waR4rO7fPsYgyqoyg,331
-odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance.py,sha256=OmGv_p2NpPuvO6y-u3e2t0V-qMF6Q_Y6BiSq4JpspM4,16663
-odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_line.py,sha256=9V4xTbZQ2fH_c3GfVMrfRBCC9ysmmGdmrgRXwTjcgro,977
-odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_settlement.py,sha256=lb3syBfYs7arc_GFeQZKJEhL-zQDnBHtBLbyEeCyHVE,13989
-odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_settlement_line.py,sha256=5mhMT_E6PSfap7C3lzcvfGrOh0tli1ZG3wSjVInT4W0,2645
+odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance.py,sha256=clxKOraBk0fH7TniQCUF7O-oVeKNRPTEqDVbctWisdA,17960
+odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_line.py,sha256=S8TRECuv4acuqNGdF0fi6tttfcRWRhSlowr-KVfjcEY,1087
+odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_settlement.py,sha256=1_4PuGhcd37QIGlKPDLJ91xFQOHsEJYz5Zm0j-15Aqk,15293
+odoo/addons/ssi_hr_cash_advance/models/hr_cash_advance_settlement_line.py,sha256=23Q2S3XSOfrUpmrdBE1IDYiECItri-FVZs9o1s0OtUw,2766
 odoo/addons/ssi_hr_cash_advance/models/hr_expense_type.py,sha256=qg6fd12OouSgI3wDuZN2zcliNhWFGlkwCxRRrQGQt7c,850
 odoo/addons/ssi_hr_cash_advance/models/res_config_settings.py,sha256=qNR3M_uWLhMEc4pBorPtTfaojCJ-SYM-kVUnjM_Pe8Q,1662
 odoo/addons/ssi_hr_cash_advance/security/ir.model.access.csv,sha256=0JrT6jIhCjmBcbLJwYggjmci20CHS5cQ2DsBG6l6bp4,1622
 odoo/addons/ssi_hr_cash_advance/security/ir_module_category_data.xml,sha256=0i_rFsCVWF0ZByVRHOEUUeqVRMnyUrA5YSo2LbXLhWc,1234
 odoo/addons/ssi_hr_cash_advance/security/ir_rule_data.xml,sha256=M8gzQ9CNA7qhkTGiY6qfNUIBEfRXeN75cZO3c2Oo_H8,7413
 odoo/addons/ssi_hr_cash_advance/security/res_group_data.xml,sha256=-azbUMypaDHz_i6zc3EMaH1KWWqzx-0rxx18EPxqLw8,5919
 odoo/addons/ssi_hr_cash_advance/static/description/icon.png,sha256=lNGJOSg4cMRfwPTfFKVT6d5B2N1N83iVpEEN1blqu1I,48333
 odoo/addons/ssi_hr_cash_advance/static/description/icon_timesheet.png,sha256=YLn-P03o-57wVcBpoPO8vFS7BoA9l1oiScGF37hgM8Q,4151
-odoo/addons/ssi_hr_cash_advance/views/hr_cash_advance_views.xml,sha256=lvCCDZ8T5fj7wpp1VdnbFMDXXJvWAv_uCi7L8a0VYzI,9898
-odoo/addons/ssi_hr_cash_advance/views/hr_cash_advance_views_settlement.xml,sha256=plmdLY51WUiUSoP6TuccdG7vlFHA-ILYp8pv2QZQW4w,9772
+odoo/addons/ssi_hr_cash_advance/views/hr_cash_advance_views.xml,sha256=7jm2a6mZdTKMdN6jDqXntu1__jEbuONO96t2n-7njRs,12972
+odoo/addons/ssi_hr_cash_advance/views/hr_cash_advance_views_settlement.xml,sha256=Z4CuAN4evvwwVaQmbk1U6_LjGAH3FtbFw4HHnzjnf4g,12887
 odoo/addons/ssi_hr_cash_advance/views/hr_expense_type_views.xml,sha256=9IZTs2Qd5pRIReGB68D3trR3sYXGRFYIVO29wqvTZyo,1171
 odoo/addons/ssi_hr_cash_advance/views/res_config_settings_views.xml,sha256=2wx0xzNamnVe2Dp6azCZJ4PRTYrAzmJ0RhTxozFoOfs,15638
-odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/METADATA,sha256=S7ADjAha05m69RY5e_sKI1Yc54nFfQOkv-nfrRdW0AU,2254
-odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_ssi_hr_cash_advance-14.0.1.8.0.dist-info/RECORD,,
+odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/METADATA,sha256=5cyQZEfKagjy4EQVlf1modqdm_tfDIjJYllogy8jSSw,2369
+odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
+odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_ssi_hr_cash_advance-14.0.1.9.0.dist-info/RECORD,,
```

