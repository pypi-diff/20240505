# Comparing `tmp/py_synologydsm_api-2.4.2-py3-none-any.whl.zip` & `tmp/py_synologydsm_api-2.4.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,34 +1,34 @@
 Zip file size: 36014 bytes, number of entries: 32
--rw-r--r--  2.0 unx      106 b- defN 24-Apr-13 08:39 synology_dsm/__init__.py
--rw-r--r--  2.0 unx     8020 b- defN 24-Apr-13 08:39 synology_dsm/const.py
--rw-r--r--  2.0 unx     4935 b- defN 24-Apr-13 08:39 synology_dsm/exceptions.py
--rw-r--r--  2.0 unx     1432 b- defN 24-Apr-13 08:39 synology_dsm/helpers.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-13 08:39 synology_dsm/py.typed
--rw-r--r--  2.0 unx    20942 b- defN 24-Apr-13 08:39 synology_dsm/synology_dsm.py
--rw-r--r--  2.0 unx      439 b- defN 24-Apr-13 08:39 synology_dsm/api/__init__.py
--rw-r--r--  2.0 unx       32 b- defN 24-Apr-13 08:39 synology_dsm/api/core/__init__.py
--rw-r--r--  2.0 unx     9177 b- defN 24-Apr-13 08:39 synology_dsm/api/core/external_usb.py
--rw-r--r--  2.0 unx     2321 b- defN 24-Apr-13 08:39 synology_dsm/api/core/security.py
--rw-r--r--  2.0 unx     3136 b- defN 24-Apr-13 08:39 synology_dsm/api/core/share.py
--rw-r--r--  2.0 unx     3599 b- defN 24-Apr-13 08:39 synology_dsm/api/core/system.py
--rw-r--r--  2.0 unx     1576 b- defN 24-Apr-13 08:39 synology_dsm/api/core/upgrade.py
--rw-r--r--  2.0 unx     6551 b- defN 24-Apr-13 08:39 synology_dsm/api/core/utilization.py
--rw-r--r--  2.0 unx     4213 b- defN 24-Apr-13 08:39 synology_dsm/api/download_station/__init__.py
--rw-r--r--  2.0 unx     1922 b- defN 24-Apr-13 08:39 synology_dsm/api/download_station/task.py
--rw-r--r--  2.0 unx       31 b- defN 24-Apr-13 08:39 synology_dsm/api/dsm/__init__.py
--rw-r--r--  2.0 unx     1889 b- defN 24-Apr-13 08:39 synology_dsm/api/dsm/information.py
--rw-r--r--  2.0 unx     2305 b- defN 24-Apr-13 08:39 synology_dsm/api/dsm/network.py
--rw-r--r--  2.0 unx     5658 b- defN 24-Apr-13 08:39 synology_dsm/api/photos/__init__.py
--rw-r--r--  2.0 unx      460 b- defN 24-Apr-13 08:39 synology_dsm/api/photos/model.py
--rw-r--r--  2.0 unx       35 b- defN 24-Apr-13 08:39 synology_dsm/api/storage/__init__.py
--rw-r--r--  2.0 unx     8742 b- defN 24-Apr-13 08:39 synology_dsm/api/storage/storage.py
--rw-r--r--  2.0 unx     9694 b- defN 24-Apr-13 08:39 synology_dsm/api/surveillance_station/__init__.py
--rw-r--r--  2.0 unx     3804 b- defN 24-Apr-13 08:39 synology_dsm/api/surveillance_station/camera.py
--rw-r--r--  2.0 unx      523 b- defN 24-Apr-13 08:39 synology_dsm/api/surveillance_station/const.py
--rw-r--r--  2.0 unx     1081 b- defN 24-Apr-13 08:39 py_synologydsm_api-2.4.2.dist-info/LICENSE.txt
--rw-r--r--  2.0 unx    15255 b- defN 24-Apr-13 08:39 py_synologydsm_api-2.4.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-13 08:39 py_synologydsm_api-2.4.2.dist-info/WHEEL
--rw-r--r--  2.0 unx       63 b- defN 24-Apr-13 08:39 py_synologydsm_api-2.4.2.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       13 b- defN 24-Apr-13 08:39 py_synologydsm_api-2.4.2.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2889 b- defN 24-Apr-13 08:39 py_synologydsm_api-2.4.2.dist-info/RECORD
-32 files, 120935 bytes uncompressed, 31288 bytes compressed:  74.1%
+-rw-r--r--  2.0 unx      106 b- defN 24-May-05 10:30 synology_dsm/__init__.py
+-rw-r--r--  2.0 unx     8020 b- defN 24-May-05 10:30 synology_dsm/const.py
+-rw-r--r--  2.0 unx     4935 b- defN 24-May-05 10:30 synology_dsm/exceptions.py
+-rw-r--r--  2.0 unx     1432 b- defN 24-May-05 10:30 synology_dsm/helpers.py
+-rw-r--r--  2.0 unx        0 b- defN 24-May-05 10:30 synology_dsm/py.typed
+-rw-r--r--  2.0 unx    20883 b- defN 24-May-05 10:30 synology_dsm/synology_dsm.py
+-rw-r--r--  2.0 unx      439 b- defN 24-May-05 10:30 synology_dsm/api/__init__.py
+-rw-r--r--  2.0 unx       32 b- defN 24-May-05 10:30 synology_dsm/api/core/__init__.py
+-rw-r--r--  2.0 unx     9177 b- defN 24-May-05 10:30 synology_dsm/api/core/external_usb.py
+-rw-r--r--  2.0 unx     2321 b- defN 24-May-05 10:30 synology_dsm/api/core/security.py
+-rw-r--r--  2.0 unx     3136 b- defN 24-May-05 10:30 synology_dsm/api/core/share.py
+-rw-r--r--  2.0 unx     3599 b- defN 24-May-05 10:30 synology_dsm/api/core/system.py
+-rw-r--r--  2.0 unx     1576 b- defN 24-May-05 10:30 synology_dsm/api/core/upgrade.py
+-rw-r--r--  2.0 unx     6551 b- defN 24-May-05 10:30 synology_dsm/api/core/utilization.py
+-rw-r--r--  2.0 unx     4213 b- defN 24-May-05 10:30 synology_dsm/api/download_station/__init__.py
+-rw-r--r--  2.0 unx     1922 b- defN 24-May-05 10:30 synology_dsm/api/download_station/task.py
+-rw-r--r--  2.0 unx       31 b- defN 24-May-05 10:30 synology_dsm/api/dsm/__init__.py
+-rw-r--r--  2.0 unx     1889 b- defN 24-May-05 10:30 synology_dsm/api/dsm/information.py
+-rw-r--r--  2.0 unx     2305 b- defN 24-May-05 10:30 synology_dsm/api/dsm/network.py
+-rw-r--r--  2.0 unx     5658 b- defN 24-May-05 10:30 synology_dsm/api/photos/__init__.py
+-rw-r--r--  2.0 unx      460 b- defN 24-May-05 10:30 synology_dsm/api/photos/model.py
+-rw-r--r--  2.0 unx       35 b- defN 24-May-05 10:30 synology_dsm/api/storage/__init__.py
+-rw-r--r--  2.0 unx     8742 b- defN 24-May-05 10:30 synology_dsm/api/storage/storage.py
+-rw-r--r--  2.0 unx     9694 b- defN 24-May-05 10:30 synology_dsm/api/surveillance_station/__init__.py
+-rw-r--r--  2.0 unx     3804 b- defN 24-May-05 10:30 synology_dsm/api/surveillance_station/camera.py
+-rw-r--r--  2.0 unx      523 b- defN 24-May-05 10:30 synology_dsm/api/surveillance_station/const.py
+-rw-r--r--  2.0 unx     1081 b- defN 24-May-05 10:30 py_synologydsm_api-2.4.3.dist-info/LICENSE.txt
+-rw-r--r--  2.0 unx    15255 b- defN 24-May-05 10:30 py_synologydsm_api-2.4.3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-05 10:30 py_synologydsm_api-2.4.3.dist-info/WHEEL
+-rw-r--r--  2.0 unx       63 b- defN 24-May-05 10:30 py_synologydsm_api-2.4.3.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       13 b- defN 24-May-05 10:30 py_synologydsm_api-2.4.3.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2889 b- defN 24-May-05 10:30 py_synologydsm_api-2.4.3.dist-info/RECORD
+32 files, 120876 bytes uncompressed, 31288 bytes compressed:  74.1%
```

## zipnote {}

```diff
@@ -72,26 +72,26 @@
 
 Filename: synology_dsm/api/surveillance_station/camera.py
 Comment: 
 
 Filename: synology_dsm/api/surveillance_station/const.py
 Comment: 
 
-Filename: py_synologydsm_api-2.4.2.dist-info/LICENSE.txt
+Filename: py_synologydsm_api-2.4.3.dist-info/LICENSE.txt
 Comment: 
 
-Filename: py_synologydsm_api-2.4.2.dist-info/METADATA
+Filename: py_synologydsm_api-2.4.3.dist-info/METADATA
 Comment: 
 
-Filename: py_synologydsm_api-2.4.2.dist-info/WHEEL
+Filename: py_synologydsm_api-2.4.3.dist-info/WHEEL
 Comment: 
 
-Filename: py_synologydsm_api-2.4.2.dist-info/entry_points.txt
+Filename: py_synologydsm_api-2.4.3.dist-info/entry_points.txt
 Comment: 
 
-Filename: py_synologydsm_api-2.4.2.dist-info/top_level.txt
+Filename: py_synologydsm_api-2.4.3.dist-info/top_level.txt
 Comment: 
 
-Filename: py_synologydsm_api-2.4.2.dist-info/RECORD
+Filename: py_synologydsm_api-2.4.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## synology_dsm/synology_dsm.py

```diff
@@ -106,17 +106,17 @@
             IPv6Address(dsm_ip)
             dsm_ip = f"[{dsm_ip}]"
         except ValueError:
             pass
 
         # Build variables
         if use_https:
-            self._base_url = f"https://{dsm_ip}:{dsm_port}"
+            self._base_url = URL(f"https://{dsm_ip}:{dsm_port}")
         else:
-            self._base_url = f"http://{dsm_ip}:{dsm_port}"
+            self._base_url = URL(f"http://{dsm_ip}:{dsm_port}")
 
     def _debuglog(self, message: str) -> None:
         """Outputs message if debug mode is enabled."""
         _LOGGER.debug(message)
         if self._debugmode:
             print("DEBUG: " + message)
 
@@ -128,23 +128,21 @@
         """
         return (
             api in self.DSM_5_WEIRD_URL_API
             and self._information is not None
             and int(self._information.version) < 7321  # < DSM 6
         )
 
-    def _build_url(self, api: str) -> str:
-        if self._is_weird_api_url(api):
-            if api == SynoStorage.API_KEY:
-                return (
-                    f"{self._base_url}/webman/modules/StorageManager/"
-                    f"storagehandler.cgi?"
-                )
+    def _build_url(self, api: str) -> URL:
+        if self._is_weird_api_url(api) and api == SynoStorage.API_KEY:
+            return self._base_url.join(
+                URL("/webman/modules/StorageManager/storagehandler.cgi?")
+            )
 
-        return f"{self._base_url}/webapi/{self.apis[api]['path']}?"
+        return self._base_url.join(URL(f"/webapi/{self.apis[api]['path']}?"))
 
     async def discover_apis(self) -> None:
         """Retreives available API infos from the NAS."""
         if self._apis.get(API_AUTH):
             return
         data = await self.get(API_INFO, "query")
         if not isinstance(data, dict):
@@ -255,15 +253,15 @@
 
     async def _prepare_request(
         self,
         api: str,
         method: str,
         params: dict | None = None,
         **kwargs: Any,
-    ) -> tuple[str, dict, dict]:
+    ) -> tuple[URL, dict, dict]:
         """Prepare the url and parameters for a request."""
         # Discover existing APIs
         if api != API_INFO:
             await self.discover_apis()
 
         # Check if logged
         if not self._session_id and api not in [API_AUTH, API_INFO]:
@@ -329,26 +327,25 @@
             raise SynologyDSMAPIErrorException(
                 api, response["error"]["code"], response["error"].get("errors")
             )
 
         return response
 
     async def _execute_request(
-        self, method: str, url: str, params: dict | None, **kwargs: Any
+        self, method: str, url: URL, params: dict | None, **kwargs: Any
     ) -> bytes | dict | str:
         """Function to execute and handle a request."""
         if params:
             # special handling for spaces in parameters
             # because yarl.URL does encode a space as + instead of %20
             # safe extracted from yarl.URL._QUERY_PART_QUOTER
-            safe = "?/:@-._~!$'()*,"
-            query = urlencode(params, safe=safe, quote_via=quote)
-            url_encoded = URL(str(URL(url)) + "?" + query, encoded=True)
+            query = urlencode(params, safe="?/:@-._~!$'()*,", quote_via=quote)
+            url_encoded = url.join(URL(f"?{query}", encoded=True))
         else:
-            url_encoded = URL(url)
+            url_encoded = url
 
         try:
             if method == "GET":
                 response = await self._session.get(
                     url_encoded, timeout=self._aiohttp_timeout, **kwargs
                 )
             elif method == "POST":
```

## Comparing `py_synologydsm_api-2.4.2.dist-info/LICENSE.txt` & `py_synologydsm_api-2.4.3.dist-info/LICENSE.txt`

 * *Files identical despite different names*

## Comparing `py_synologydsm_api-2.4.2.dist-info/METADATA` & `py_synologydsm_api-2.4.3.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: py-synologydsm-api
-Version: 2.4.2
+Version: 2.4.3
 Summary: Python API for communication with Synology DSM
 Home-page: https://github.com/mib1185/py-synologydsm-api#readme
 Author: Michael Brussk (mib1185), Quentin POLLET (Quentame), FG van Zeelst (ProtoThis)
 License: MIT
 Project-URL: Changelog, https://github.com/mib1185/py-synologydsm-api/releases
 Project-URL: Repository, https://github.com/mib1185/py-synologydsm-api
 Project-URL: Documentation, https://github.com/mib1185/py-synologydsm-api#readme
```

## Comparing `py_synologydsm_api-2.4.2.dist-info/RECORD` & `py_synologydsm_api-2.4.3.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 synology_dsm/__init__.py,sha256=aInIYAdeWaaOVX_brHfDFdGlj6aaSeJpuA8Tl25OV-4,106
 synology_dsm/const.py,sha256=8aAkaVWl87iDsHbs1v-oCnzB6Z6SlPfmU6Syz0T9Lro,8020
 synology_dsm/exceptions.py,sha256=IaFYeiRr6RmCqzr9ewZQW0NcKvLASc9-Z4ShO-DunkU,4935
 synology_dsm/helpers.py,sha256=7AG1Q7u9CbFwKVXIkpgKbNT9aQ28PwmAsZhLZG5l9MU,1432
 synology_dsm/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-synology_dsm/synology_dsm.py,sha256=WOLwTIjwwDUBRKx-Wccgzx5c-zRk4vdIPJln1QkkNAA,20942
+synology_dsm/synology_dsm.py,sha256=IU7_28RzTCbtFIL0I9d5kBrUgfYV7w8MVFQJ-gyFi0U,20883
 synology_dsm/api/__init__.py,sha256=0qNb81jE2nFKVfPMzKaU7sIt8zg3CM_kjaUXFKk04-w,439
 synology_dsm/api/core/__init__.py,sha256=Sh_dB3xUjd-gkqR4nnp-tlj1wRxaKd-H2KURKg4k0yA,32
 synology_dsm/api/core/external_usb.py,sha256=d0WqM5jAf83EW21i1ZAaAAtKxn8hiWZtLv_3DZE0_dA,9177
 synology_dsm/api/core/security.py,sha256=7YIUnutktfSUIUcchgqVFfWjg2mD5l6yw4bZaUefeAM,2321
 synology_dsm/api/core/share.py,sha256=GwwxvMuRYnvwyhYg2bsZX4dOKrXgLz8-or1Hzcl9p44,3136
 synology_dsm/api/core/system.py,sha256=zCAQu4y74r27abF_fKtR2qSTmS2Mmg3Z35sNoWsYzRo,3599
 synology_dsm/api/core/upgrade.py,sha256=f6WdtIdBgupdyJxj03vNxiqe1YPzO_AWmsNJi15PPK0,1576
@@ -20,13 +20,13 @@
 synology_dsm/api/photos/__init__.py,sha256=5KuwJ6TG5U24xkRQPU0IgzCmlLjhsyGaHH1KuF2UMWI,5658
 synology_dsm/api/photos/model.py,sha256=7R8ygNhJEtdrp9fC6zzMb1FtSzPjP8Yt7ZwNBxJhkKU,460
 synology_dsm/api/storage/__init__.py,sha256=utx2aAU6aFNAUFLXxODDpnzY1cU4IdaCWZ3PFcZhFcU,35
 synology_dsm/api/storage/storage.py,sha256=olJoVDjnnOmWBm-a6Ag0sabY_Z0fr_NYxta3jBfNHFE,8742
 synology_dsm/api/surveillance_station/__init__.py,sha256=TpYLmC0GSaNbrDE0MB9WNCkRgiEC5VxLOU3ZKMyU0EE,9694
 synology_dsm/api/surveillance_station/camera.py,sha256=mz1hpMniNY0RnnArrtb1OOkQ5DUmpZbPNawXZo39qdE,3804
 synology_dsm/api/surveillance_station/const.py,sha256=DqlhX0J2om-I8FBrmJ6519C1kDPcVi04ugMj6ZjNaVs,523
-py_synologydsm_api-2.4.2.dist-info/LICENSE.txt,sha256=WGCx5VLKE4StlP_eAwVq4Kj4yp-hntiKdTJuKAjzgIk,1081
-py_synologydsm_api-2.4.2.dist-info/METADATA,sha256=A0fXxQ22jFcJ3ya_1PweqElf_Q5bmueAEoitoX9fi74,15255
-py_synologydsm_api-2.4.2.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-py_synologydsm_api-2.4.2.dist-info/entry_points.txt,sha256=TgCBHUoDqjOdg__EY85BPGjnSyDFgkwK_9H7s9mB85Q,63
-py_synologydsm_api-2.4.2.dist-info/top_level.txt,sha256=sTQIu0LAoi94eaOkhlUsrxVmxibEPEbmhqD2c4VMp-M,13
-py_synologydsm_api-2.4.2.dist-info/RECORD,,
+py_synologydsm_api-2.4.3.dist-info/LICENSE.txt,sha256=WGCx5VLKE4StlP_eAwVq4Kj4yp-hntiKdTJuKAjzgIk,1081
+py_synologydsm_api-2.4.3.dist-info/METADATA,sha256=I3ILwu4kffQ54wPitHzFUMouvrns5KN9mjapsS6VWM8,15255
+py_synologydsm_api-2.4.3.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+py_synologydsm_api-2.4.3.dist-info/entry_points.txt,sha256=TgCBHUoDqjOdg__EY85BPGjnSyDFgkwK_9H7s9mB85Q,63
+py_synologydsm_api-2.4.3.dist-info/top_level.txt,sha256=sTQIu0LAoi94eaOkhlUsrxVmxibEPEbmhqD2c4VMp-M,13
+py_synologydsm_api-2.4.3.dist-info/RECORD,,
```

